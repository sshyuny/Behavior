<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="roadiary.behavior.record.repository.RecordsMapper">

    <insert id="insertRecord" parameterType="roadiary.behavior.record.entity.RecordEntity"> 
        INSERT INTO behavior_records 
            (behavior_category_id, user_id, start_time, end_time, detail) 
            VALUES 
            (#{categoryId}, #{userId}, #{startDateTime}, #{endDateTime}, #{detail}) 
    </insert>
    
    <select id="selectRecords" resultType="roadiary.behavior.record.dto.RecordResDto">
        SELECT r.behavior_category_id, r.start_time, r.end_time, r.detail, c.content
        FROM behavior_records as r
            LEFT JOIN behavior_category as c
            ON r.behavior_category_id = c.behavior_category_id
            WHERE r.user_id = #{userId} AND DATE(r.start_time) = #{reqDate};
    </select>

</mapper>
